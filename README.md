# Loopify — простой шаблонизатор с поддержкой циклов

Loopify — лёгкая JavaScript‑библиотека для рендеринга HTML‑шаблонов с подстановкой данных и обработкой циклов.

## Установка через CDN (jsdelivr)

Добавьте следующую строку в секцию `<head>` вашего HTML‑файла:

```html
<script src="https://cdn.jsdelivr.net/npm/loopify/loopify.min.js"></script>
```

## Быстрое начало работы

1. Подключите библиотеку через CDN.
2. Создайте экземпляр `Render` с данными:
   ```javascript
   const renderer = new Render({
     users: [
       { name: 'Алексей', age: 25 },
       { name: 'Мария', age: 30 }
     ],
     title: 'Список пользователей'
   });
   ```
3. Вызовите метод `mount()` для рендеринга:
   ```javascript
   renderer.mount('#app');
   ```

## Синтаксис шаблонов

### Подстановка переменных

Используйте двойные фигурные скобки `{{...}}` для вставки значений:

```html
<h1>{{title}}</h1>
<p>Привет, {{users[0].name}}!</p>
```

### Циклы

Для итерации по массивам используйте конструкцию:

```html
<!-- LOOP:массив [as имя_переменной] -->
  ...шаблон...
<!-- ENDLOOP -->
```

- `массив` — ключ в данных, указывающий на массив;
- `имя_переменной` (опционально) — имя переменной для текущего элемента (по умолчанию `item`).

## Примеры использования

### Пример 1. Простая подстановка

**HTML:**
```html
<div id="app">
  <h1>{{title}}</h1>
  <p>Всего пользователей: {{users.length}}</p>
</div>
```

**JS:**
```javascript
const renderer = new Render({
  title: 'Мой сайт',
  users: [{ name: 'Иван' }]
});
renderer.mount('#app');
```

**Результат:**
```html
<div id="app">
  <h1>Мой сайт</h1>
  <p>Всего пользователей: 1</p>
</div>
```

### Пример 2. Цикл по массиву

**HTML:**
```html
<div id="app">
  <h1>{{title}}</h1>
  <ul>
    <!-- LOOP:users as user -->
      <li>{{user.name}} ({{user.age}} лет)</li>
    <!-- ENDLOOP -->
  </ul>
</div>
```

**JS:**
```javascript
const renderer = new Render({
  title: 'Список пользователей',
  users: [
    { name: 'Алексей', age: 25 },
    { name: 'Мария', age: 30 }
  ]
});
renderer.mount('#app');
```

**Результат:**
```html
<div id="app">
  <h1>Список пользователей</h1>
  <ul>
    <li>Алексей (25 лет)</li>
    <li>Мария (30 лет)</li>
  </ul>
</div>
```

### Пример 3. Вложенные циклы

**HTML:**
```html
<div id="app">
  <!-- LOOP:categories -->
    <h2>{{item.name}}</h2>
    <ul>
      <!-- LOOP:item.products as product -->
        <li>{{product.name}} — {{product.price}} руб.</li>
      <!-- ENDLOOP -->
    </ul>
  <!-- ENDLOOP -->
</div>
```

**JS:**
```javascript
const renderer = new Render({
  categories: [
    {
      name: 'Электроника',
      products: [
        { name: 'Смартфон', price: 20000 },
        { name: 'Ноутбук', price: 50000 }
      ]
    },
    {
      name: 'Одежда',
      products: [
        { name: 'Футболка', price: 1000 }
      ]
    }
  ]
});
renderer.mount('#app');
```

## API

### `new Render(data)`
Создаёт экземпляр шаблонизатора с переданными данными.

- `data` — объект с данными для подстановки.

### `mount(selector)`
Рендерит шаблон в указанный элемент DOM.

- `selector` (строка, опционально) — CSS‑селектор элемента (по умолчанию `'body'`).

**Бросает ошибку**, если элемент не найден.

## Ограничения и особенности

1. **Синтаксис переменных:** поддерживаются точки и квадратные скобки (например, `{{user.name}}`, `{{items[0].title}}`).
2. **Обработка ошибок:** при ошибке в пути к данным возвращается исходная конструкция `{{...}}`.
3. **Циклы:** вложенные циклы поддерживаются, но имя переменной во внутреннем цикле не должно совпадать с внешним.
4. **Производительность:** для больших массивов рекомендуется использовать виртуальные списки или пагинацию.
